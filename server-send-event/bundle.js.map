{"version":3,"sources":["webpack:///webpack/bootstrap 8a80d1cca731512b500b","webpack:///./src/main.js","webpack:///./src/ServerSendEventHandler.js","webpack:///./src/ServerSendEventHandlerException.js","webpack:///./src/ProductList.js","webpack:///./src/ProductListException.js"],"names":["window","onload","product_list","sse_handler","loadList","makeTableFromProductList","getProductList","addEventHandler","ADD","addItem","bind","UPDATE","updateItem","DELETE","deleteItemById","listen","tbody_id","tbody","document","getElementById","docfrag","createDocumentFragment","Array","prototype","forEach","call","product","tr","createElement","id","name","price","stock","setAttribute","td_name","td_price","td_stock","textContent","appendChild","ServerSendEventHandler","update_events","delete_events","add_events","url","length","includes","event_source","EventSource","addEventListener","e","console","log","response_data","JSON","parse","data","event_handler","onopen","onerror","onmessage","event_type","push","index","findIndex","Object","is","item","splice","ServerSendEventHandlerException","message","constructor","Error","ProductList","xhr","XMLHttpRequest","open","send","result","responseText","updating_item","prop","hasOwnProperty","ProductListException"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACnCA;;;;AACA;;;;;;AAJA;;;AAMAA,QAAOC,MAAP,GAAgB,YAAY;AACxB,SAAIC,eAAe,2BAAnB;AACA,SAAIC,cAAc,sCAAlB;AACAD,kBAAaE,QAAb,CAAsB,sBAAtB;AACAC,8BAAyB,cAAzB,EAAyCH,aAAaI,cAAb,EAAzC;AACAH,iBAAYI,eAAZ,CAA4B,iCAAuBC,GAAnD,EAAwDN,aAAaO,OAAb,CAAqBC,IAArB,CAA0BR,YAA1B,CAAxD;AACAC,iBAAYI,eAAZ,CAA4B,iCAAuBI,MAAnD,EAA2DT,aAAaU,UAAb,CAAwBF,IAAxB,CAA6BR,YAA7B,CAA3D;AACAC,iBAAYI,eAAZ,CAA4B,iCAAuBM,MAAnD,EAA2DX,aAAaY,cAAb,CAA4BJ,IAA5B,CAAiCR,YAAjC,CAA3D;AACAC,iBAAYY,MAAZ,CAAmB,kBAAnB;AACH,EATD;AAUA,UAASV,wBAAT,CAAmCW,QAAnC,EAA6Cd,YAA7C,EAA2D;AACvD,SAAIe,QAAQC,SAASC,cAAT,CAAwBH,QAAxB,CAAZ;AACA,SAAII,UAAUF,SAASG,sBAAT,EAAd;AACAC,WAAMC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BvB,YAA7B,EAA2C,UAAUwB,OAAV,EAAmB;AAC1D,aAAIC,KAAKT,SAASU,aAAT,CAAuB,IAAvB,CAAT;AAD0D,aAErDC,EAFqD,GAE3BH,OAF2B,CAErDG,EAFqD;AAAA,aAEjDC,IAFiD,GAE3BJ,OAF2B,CAEjDI,IAFiD;AAAA,aAE3CC,KAF2C,GAE3BL,OAF2B,CAE3CK,KAF2C;AAAA,aAEpCC,KAFoC,GAE3BN,OAF2B,CAEpCM,KAFoC;;AAG1DL,YAAGM,YAAH,CAAgB,IAAhB,EAAsBJ,EAAtB;AACA,aAAIK,UAAUhB,SAASU,aAAT,CAAuB,IAAvB,CAAd;AACA,aAAIO,WAAWjB,SAASU,aAAT,CAAuB,IAAvB,CAAf;AACA,aAAIQ,WAAWlB,SAASU,aAAT,CAAuB,IAAvB,CAAf;AACAM,iBAAQG,WAAR,GAAsBP,IAAtB;AACAK,kBAASE,WAAT,GAAuBN,KAAvB;AACAK,kBAASC,WAAT,GAAuBL,KAAvB;AACAL,YAAGW,WAAH,CAAeJ,OAAf;AACAP,YAAGW,WAAH,CAAeH,QAAf;AACAR,YAAGW,WAAH,CAAeF,QAAf;AACAhB,iBAAQkB,WAAR,CAAoBX,EAApB;AACH,MAdD;AAeAV,WAAMqB,WAAN,CAAkBlB,OAAlB;AACH,E;;;;;;;;;;;;sjBCnCD;;;;AAIA;;;;;;;;AAEA,KAAMZ,MAAM,CAAZ,C,CAAe;AACf,KAAMG,SAAS,CAAf,C,CAAkB;AAClB,KAAME,SAAS,CAAf,C,CAAkB;AAClB;;;;KAGqB0B,sB;AACjB,uCAAe;AAAA;;AACX,cAAKC,aAAL,GAAqB,EAArB;AACA,cAAKC,aAAL,GAAqB,EAArB;AACA,cAAKC,UAAL,GAAkB,EAAlB;AACH;;AAED;;;;;;;;;;;AA2BA;;;;gCAIQC,G,EAAK;AAAA;;AACT,iBAAI,CAAC,KAAKH,aAAL,CAAmBI,MAApB,EAA4B,KAAKH,aAAL,CAAmBG,MAA/C,EAAuD,KAAKF,UAAL,CAAgBE,MAAvE,EAA+EC,QAA/E,CAAwF,CAAxF,CAAJ,EAAgG;AAC5F,uBAAM,iHAAN;AACH;AACD,iBAAIC,eAAe,IAAIC,WAAJ,CAAgBJ,GAAhB,CAAnB;AACAG,0BAAaE,gBAAb,CAA8B,KAA9B,EAAsC,UAACC,CAAD,EAAO;AACzCC,yBAAQC,GAAR,CAAYF,CAAZ;AACA,qBAAIG,gBAAgBC,KAAKC,KAAL,CAAWL,EAAEM,IAAb,CAApB;AACAjC,uBAAMC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,MAAKiB,UAAlC,EAA+C,UAACc,aAAD,EAAmB;AAC9DA,mCAAcJ,aAAd;AACH,kBAFD;AAGH,cAND,EAMG,KANH;AAOAN,0BAAaE,gBAAb,CAA8B,QAA9B,EAAyC,UAACC,CAAD,EAAO;AAC5CC,yBAAQC,GAAR,CAAYF,CAAZ;AACA,qBAAIG,gBAAgBC,KAAKC,KAAL,CAAWL,EAAEM,IAAb,CAApB;AACAjC,uBAAMC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,MAAKe,aAAlC,EAAiD,UAACgB,aAAD,EAAmB;AAChEA,mCAAcJ,aAAd;AACH,kBAFD;AAGH,cAND,EAMG,KANH;AAOAN,0BAAaE,gBAAb,CAA8B,QAA9B,EAAwC,UAACC,CAAD,EAAO;AAC3CC,yBAAQC,GAAR,CAAYF,CAAZ;AACA,qBAAIG,gBAAgBC,KAAKC,KAAL,CAAWL,EAAEM,IAAb,CAApB;AACAjC,uBAAMC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,MAAKgB,aAAlC,EAAiD,UAACe,aAAD,EAAmB;AAChEA,mCAAcJ,aAAd;AACH,kBAFD;AAGH,cAND,EAMG,KANH;AAOAN,0BAAaW,MAAb,GAAuB,UAACR,CAAD,EAAO;AAC1BC,yBAAQC,GAAR,CAAY,WAAZ;AACH,cAFD;AAGAL,0BAAaY,OAAb,GAAuB,UAACT,CAAD,EAAO;AAC1BC,yBAAQC,GAAR,CAAYF,CAAZ;AACA,uBAAM,uFAA2EA,CAA3E,OAAN;AACH,cAHD;AAIAH,0BAAaa,SAAb,GAAyB,UAACV,CAAD,EAAO;AAC5BC,yBAAQC,GAAR,CAAYF,CAAZ;AACH,cAFD;AAGAH,0BAAaE,gBAAb,CAA8B,MAA9B,EAAsC,UAACC,CAAD,EAAO;AACzCC,yBAAQC,GAAR,CAAYF,CAAZ;AACA,qBAAIG,gBAAgBC,KAAKC,KAAL,CAAWL,EAAEM,IAAb,CAApB;AACAjC,uBAAMC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,MAAKgB,aAAlC,EAAiD,UAACe,aAAD,EAAmB;AAChEA,mCAAcJ,aAAd;AACH,kBAFD;AAGH,cAND,EAMG,KANH;AAOH;;AAED;;;;;;;;yCAKiBQ,U,EAAYJ,a,EAAe;AACxC,qBAAQI,UAAR;AACI,sBAAKrB,uBAAuB/B,GAA5B;AACI,0BAAKkC,UAAL,CAAgBmB,IAAhB,CAAqBL,aAArB;AACA;AACJ,sBAAKjB,uBAAuB5B,MAA5B;AACI,0BAAK6B,aAAL,CAAmBqB,IAAnB,CAAwBL,aAAxB;AACA;AACJ,sBAAKjB,uBAAuB1B,MAA5B;AACI,0BAAK4B,aAAL,CAAmBoB,IAAnB,CAAwBL,aAAxB;AACA;AACJ;AACI,2BAAM,kFAAsEI,UAAtE,OAAN;AACA;AAZR;AAcH;;AAED;;;;;;;;4CAKoBA,U,EAAYJ,a,EAAe;AAC3C,qBAAQI,UAAR;AACI,sBAAKrB,uBAAuB/B,GAA5B;AACI,yBAAIsD,QAAQ,KAAKpB,UAAL,CAAgBqB,SAAhB,CAA0B;AAAA,gCAAQC,OAAOC,EAAP,CAAUC,IAAV,EAAgBV,aAAhB,CAAR;AAAA,sBAA1B,CAAZ;AACA,yBAAIM,UAAU,CAAC,CAAf,EAAkB;AACd,+BAAM,iFAAN;AACH;AACD,0BAAKpB,UAAL,CAAgByB,MAAhB,CAAuBL,KAAvB,EAA8B,CAA9B;AACA;AACJ,sBAAKvB,uBAAuB5B,MAA5B;AACI,0BAAK6B,aAAL,CAAmBuB,SAAnB,CAA6B;AAAA,gCAAQC,OAAOC,EAAP,CAAUC,IAAV,EAAgBV,aAAhB,CAAR;AAAA,sBAA7B;AACA,yBAAIM,UAAU,CAAC,CAAf,EAAkB;AACd,+BAAM,iFAAN;AACH;AACD,0BAAKtB,aAAL,CAAmB2B,MAAnB,CAA0BL,KAA1B,EAAiC,CAAjC;AACA;AACJ,sBAAKvB,uBAAuB1B,MAA5B;AACI,0BAAK4B,aAAL,CAAmBsB,SAAnB,CAA6B;AAAA,gCAAQC,OAAOC,EAAP,CAAUC,IAAV,EAAgBV,aAAhB,CAAR;AAAA,sBAA7B;AACA,yBAAIM,UAAU,CAAC,CAAf,EAAkB;AACd,+BAAM,iFAAN;AACH;AACD,0BAAKrB,aAAL,CAAmB0B,MAAnB,CAA0BL,KAA1B,EAAiC,CAAjC;AACA;AACJ;AACI,2BAAM,kFAAsEF,UAAtE,OAAN;AACA;AAxBR;AA0BH;;;6BA7HiB;AACd,oBAAOpD,GAAP;AACH;;AAED;;;;;;;;6BAKqB;AACjB,oBAAOG,MAAP;AACH;;AAED;;;;;;;;6BAKqB;AACjB,oBAAOE,MAAP;AACH;;;;;;mBAhCgB0B,sB;;;;;;;;;;;;;;;;;;ACZrB;;;;AAIA;;;KAGqB6B,+B;;;AACjB,4CAAYC,OAAZ,EAAqB;AAAA;;AAAA,mKACXA,OADW;;AAEjB,WAAKvC,IAAL,GAAY,MAAKwC,WAAL,CAAiBxC,IAA7B;AACA,WAAKuC,OAAL,GAAeA,OAAf;AAHiB;AAIpB;;;GALyDE,K;;mBAAzCH,+B;;;;;;;;;;;;sjBCPrB;;;;;AAGA;;;;;;;;AACA;;;KAGqBI,W;AACjB,4BAAe;AAAA;;AACX,cAAKtE,YAAL,GAAoB,EAApB;AACH;;AAED;;;;;;;;kCAIUyC,G,EAAK;AACX,iBAAI;AACA,qBAAI8B,MAAM,IAAIC,cAAJ,EAAV;AACA;AACAD,qBAAIE,IAAJ,CAAS,KAAT,EAAgBhC,GAAhB,EAAqB,KAArB;AACA8B,qBAAIG,IAAJ;AACA,qBAAIC,SAASxB,KAAKC,KAAL,CAAWmB,IAAIK,YAAf,CAAb;AACA,sBAAK5E,YAAL,GAAoB2E,MAApB;AACA,wBAAOA,MAAP;AACH,cARD,CAQE,OAAO5B,CAAP,EAAU;AACR,uBAAM,+FAAmFN,GAAnF,OAAN;AACH;AACJ;;AAED;;;;;;;0CAIkB;AACd,oBAAO,KAAKzC,YAAZ;AACH;;AAED;;;;;;iCAGSgE,I,EAAM;AACV,kBAAKhE,YAAL,CAAkB2D,IAAlB,CAAuBK,IAAvB;AACJ;;AAED;;;;;;;wCAIgBrC,E,EAAI;AAChB,iBAAIiC,QAAQ,KAAK5D,YAAL,CAAkB6D,SAAlB,CAA4B;AAAA,wBAAQlC,OAAOqC,KAAKrC,EAApB;AAAA,cAA5B,CAAZ;AACA,iBAAIiC,UAAU,CAAC,CAAf,EAAkB;AACd,uBAAM,6FAAiFjC,EAAjF,OAAN;AACH;AACD,kBAAK3B,YAAL,CAAkBiE,MAAlB,CAAyBL,KAAzB,EAA+B,CAA/B;AACH;;AAED;;;;;;;oCAIYiB,a,EAAe;AACvB,iBAAIjB,QAAQ,KAAK5D,YAAL,CAAkB6D,SAAlB,CAA4B;AAAA,wBAAQG,KAAKrC,EAAL,KAAYkD,cAAclD,EAAlC;AAAA,cAA5B,CAAZ;AACA,iBAAIiC,UAAU,CAAC,CAAf,EAAkB;AACd,uBAAM,6FAAiFjC,EAAjF,OAAN;AACH;AACD;AACA,kBAAK,IAAImD,IAAT,IAAiBD,aAAjB,EAAgC;AAC5B,qBAAIf,OAAOzC,SAAP,CAAiB0D,cAAjB,CAAgCxD,IAAhC,CAAqCsD,aAArC,EAAoDC,IAApD,CAAJ,EAA+D;AAC3D,0BAAK9E,YAAL,CAAkB4D,KAAlB,EAAyBkB,IAAzB,IAAiCD,cAAcC,IAAd,CAAjC;AACH;AACJ;AACJ;;;;;;mBAjEgBR,W;;;;;;;;;;;;;;;;;;ACPrB;;;;AAIA;;;KAGqBU,oB;;;AACjB,iCAAYb,OAAZ,EAAqB;AAAA;;AAAA,6IACXA,OADW;;AAEjB,WAAKvC,IAAL,GAAY,MAAKwC,WAAL,CAAiBxC,IAA7B;AACA,WAAKuC,OAAL,GAAeA,OAAf;AAHiB;AAIpB;;;GAL8CE,K;;mBAA9BW,oB","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8a80d1cca731512b500b\n **/","/**\n * Created by simon on 9/4/16.\n */\nimport ServerSendEventHandler from './ServerSendEventHandler.js';\nimport ProductList from './ProductList.js';\n\nwindow.onload = function () {\n    let product_list = new ProductList();\n    let sse_handler = new ServerSendEventHandler();\n    product_list.loadList('./getProductList.php');\n    makeTableFromProductList(\"product_list\", product_list.getProductList());\n    sse_handler.addEventHandler(ServerSendEventHandler.ADD, product_list.addItem.bind(product_list));\n    sse_handler.addEventHandler(ServerSendEventHandler.UPDATE, product_list.updateItem.bind(product_list));\n    sse_handler.addEventHandler(ServerSendEventHandler.DELETE, product_list.deleteItemById.bind(product_list));\n    sse_handler.listen(\"./getUpdates.php\");\n};\nfunction makeTableFromProductList (tbody_id, product_list) {\n    let tbody = document.getElementById(tbody_id);\n    let docfrag = document.createDocumentFragment();\n    Array.prototype.forEach.call(product_list, function (product) {\n        let tr = document.createElement(\"tr\");\n        let {id, name, price, stock} = product;\n        tr.setAttribute('id', id);\n        let td_name = document.createElement('td');\n        let td_price = document.createElement('td');\n        let td_stock = document.createElement('td');\n        td_name.textContent = name;\n        td_price.textContent = price;\n        td_stock.textContent = stock;\n        tr.appendChild(td_name);\n        tr.appendChild(td_price);\n        tr.appendChild(td_stock);\n        docfrag.appendChild(tr);\n    });\n    tbody.appendChild(docfrag);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","/**\n * Created by simon on 9/4/16.\n */\n\nimport ServerSendEventHandlerException from './ServerSendEventHandlerException.js';\n\nconst ADD = 0; // 產品新增事件代碼\nconst UPDATE = 1; // 產品修改事件代碼\nconst DELETE = 2; // 產品刪除事件代碼\n/**\n * Server Send Event 處理物件\n */\nexport default class ServerSendEventHandler {\n    constructor () {\n        this.update_events = [];\n        this.delete_events = [];\n        this.add_events = [];\n    }\n\n    /**\n     * 取得產品新增事件代碼\n     * @returns {number}\n     * @constructor\n     */\n    static get ADD () {\n        return ADD;\n    }\n\n    /**\n     * 取得產品修改事件代碼\n     * @returns {number}\n     * @constructor\n     */\n    static get UPDATE () {\n        return UPDATE;\n    }\n\n    /**\n     * 取得產品刪除事件代碼\n     * @returns {number}\n     * @constructor\n     */\n    static get DELETE () {\n        return DELETE;\n    }\n\n    /**\n     * 開始監聽 Server Send Event 並進行處理\n     * @param url\n     */\n    listen (url) {\n        if ([this.update_events.length, this.delete_events.length, this.add_events.length].includes(0)) {\n            throw new ServerSendEventHandlerException(`Error #2: Event handlers must be specified before listing event.`);\n        }\n        let event_source = new EventSource(url);\n        event_source.addEventListener('add',  (e) => {\n            console.log(e);\n            let response_data = JSON.parse(e.data);\n            Array.prototype.forEach.call(this.add_events,  (event_handler) => {\n                event_handler(response_data);\n            });\n        }, false);\n        event_source.addEventListener('update',  (e) => {\n            console.log(e);\n            let response_data = JSON.parse(e.data);\n            Array.prototype.forEach.call(this.update_events, (event_handler) => {\n                event_handler(response_data);\n            });\n        }, false);\n        event_source.addEventListener('delete', (e) => {\n            console.log(e);\n            let response_data = JSON.parse(e.data);\n            Array.prototype.forEach.call(this.delete_events, (event_handler) => {\n                event_handler(response_data);\n            });\n        }, false);\n        event_source.onopen =  (e) => {\n            console.log('Connected');\n        };\n        event_source.onerror = (e) => {\n            console.log(e);\n            throw new ServerSendEventHandlerException(`Error #4: Server send event failed: ${e}.`);\n        };\n        event_source.onmessage = (e) => {\n            console.log(e);\n        };\n        event_source.addEventListener('ping', (e) => {\n            console.log(e);\n            let response_data = JSON.parse(e.data);\n            Array.prototype.forEach.call(this.delete_events, (event_handler) => {\n                event_handler(response_data);\n            });\n        }, false);\n    }\n\n    /**\n     * 附加事件處理函數\n     * @param event_type\n     * @param event_handler\n     */\n    addEventHandler (event_type, event_handler) {\n        switch (event_type) {\n            case ServerSendEventHandler.ADD:\n                this.add_events.push(event_handler);\n                break;\n            case ServerSendEventHandler.UPDATE:\n                this.update_events.push(event_handler);\n                break;\n            case ServerSendEventHandler.DELETE:\n                this.delete_events.push(event_handler);\n                break;\n            default:\n                throw new ServerSendEventHandlerException(`Error #1: Invalid event types: ${event_type}.`);\n                break;\n        }\n    }\n\n    /**\n     * 移除事件處理函數\n     * @param event_type\n     * @param event_handler\n     */\n    removeEventHandler (event_type, event_handler) {\n        switch (event_type) {\n            case ServerSendEventHandler.ADD:\n                let index = this.add_events.findIndex(item => Object.is(item, event_handler));\n                if (index === -1) {\n                    throw new ServerSendEventHandlerException(`Error #3: No such event handler.`);\n                }\n                this.add_events.splice(index, 1);\n                break;\n            case ServerSendEventHandler.UPDATE:\n                this.update_events.findIndex(item => Object.is(item, event_handler));\n                if (index === -1) {\n                    throw new ServerSendEventHandlerException(`Error #3: No such event handler.`);\n                }\n                this.update_events.splice(index, 1);\n                break;\n            case ServerSendEventHandler.DELETE:\n                this.delete_events.findIndex(item => Object.is(item, event_handler));\n                if (index === -1) {\n                    throw new ServerSendEventHandlerException(`Error #3: No such event handler.`);\n                }\n                this.delete_events.splice(index, 1);\n                break;\n            default:\n                throw new ServerSendEventHandlerException(`Error #1: Invalid event types: ${event_type}.`);\n                break;\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ServerSendEventHandler.js\n **/","/**\n * Created by simon on 9/4/16.\n */\n\n/**\n * ServerSendEventHandler 專屬 Exception\n */\nexport default class ServerSendEventHandlerException  extends Error {\n    constructor(message) {\n        super(message);\n        this.name = this.constructor.name;\n        this.message = message;\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/ServerSendEventHandlerException.js\n **/","/**\n * Created by simon on 9/4/16.\n */\nimport ProductListException from './ProductListException.js';\n/**\n * 維護本地產品列表的物件\n */\nexport default class ProductList {\n    constructor () {\n        this.product_list = [];\n    }\n\n    /**\n     * 從 Server 取得目前所有產品列表\n     * @param url Server Url\n     */\n    loadList (url) {\n        try {\n            let xhr = new XMLHttpRequest();\n            // 因為這個方法必須確實取得資料才能回傳，所以使用同步版本的 xhr\n            xhr.open(\"GET\", url, false);\n            xhr.send();\n            let result = JSON.parse(xhr.responseText);\n            this.product_list = result;\n            return result;\n        } catch (e) {\n            throw new ProductListException(`Error #1: Cannot load product list from remote server: ${url}.`)\n        }\n    }\n\n    /**\n     * 取得產品列表\n     * @returns {Array|*}\n     */\n    getProductList () {\n        return this.product_list;\n    }\n\n    /**\n     * 增加產品\n     */\n    addItem (item) {\n         this.product_list.push(item);\n    }\n\n    /**\n     * 刪除產品\n     * @param id\n     */\n    deleteItemById (id) {\n        let index = this.product_list.findIndex(item => id === item.id);\n        if (index === -1) {\n            throw new ProductListException(`Error #2: Delete product error, not such product id: ${id}.`);\n        }\n        this.product_list.splice(index,1);\n    }\n\n    /**\n     * 更新產品\n     * @param updating_item\n     */\n    updateItem (updating_item) {\n        let index = this.product_list.findIndex(item => item.id === updating_item.id);\n        if (index === -1) {\n            throw new ProductListException(`Error #3: Update product error, not such product id: ${id}.`);\n        }\n        // 更新產品部分資訊\n        for (let prop in updating_item) {\n            if (Object.prototype.hasOwnProperty.call(updating_item, prop)) {\n                this.product_list[index][prop] = updating_item[prop];\n            }\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ProductList.js\n **/","/**\n * Created by simon on 9/4/16.\n */\n\n/**\n * ProductList 專屬 Exception\n */\nexport default class ProductListException  extends Error {\n    constructor(message) {\n        super(message);\n        this.name = this.constructor.name;\n        this.message = message;\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/ProductListException.js\n **/"],"sourceRoot":""}